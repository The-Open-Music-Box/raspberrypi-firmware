[pytest]
testpaths = app/tests
pythonpath = .
addopts = -p app.tests.pytest_plugins.warning_suppressor
markers =
filterwarnings =
    # === HIGHEST PRIORITY SUPPRESSIONS (must be first) ===
    # Suppress the rx library datetime warning specifically
    ignore::DeprecationWarning:rx.internal.constants
    ignore::DeprecationWarning:rx.internal.*
    
    # === COMPREHENSIVE EXTERNAL LIBRARY WARNING SUPPRESSION ===
    
    # Suppress all DeprecationWarnings from external libraries
    ignore::DeprecationWarning:rx.*
    ignore::DeprecationWarning:setuptools.*
    ignore::DeprecationWarning:pkg_resources.*
    ignore::DeprecationWarning:distutils.*
    ignore::DeprecationWarning:pip.*
    ignore::DeprecationWarning:wheel.*
    ignore::DeprecationWarning:urllib3.*
    ignore::DeprecationWarning:requests.*
    ignore::DeprecationWarning:aiohttp.*
    ignore::DeprecationWarning:fastapi.*
    ignore::DeprecationWarning:starlette.*
    ignore::DeprecationWarning:uvicorn.*
    ignore::DeprecationWarning:pydantic.*
    ignore::DeprecationWarning:sqlalchemy.*
    ignore::DeprecationWarning:alembic.*
    
    # Suppress specific datetime DeprecationWarnings (Python 3.12+)
    ignore:datetime.datetime.utcfromtimestamp.*:DeprecationWarning:rx.*
    ignore:datetime.datetime.utcfromtimestamp.*:DeprecationWarning
    ignore:datetime.datetime.utcnow.*:DeprecationWarning:rx.*
    ignore:datetime.datetime.utcnow.*:DeprecationWarning
    ignore:.*utcfromtimestamp.*:DeprecationWarning
    ignore:.*utcnow.*:DeprecationWarning
    # Specific suppression for rx.internal.constants
    ignore:datetime.datetime.utcfromtimestamp\(\) is deprecated.*:DeprecationWarning:rx.internal.constants.*
    ignore:datetime.datetime.utcfromtimestamp\(\) is deprecated.*:DeprecationWarning
    
    # === RESOURCE AND CONNECTION WARNINGS ===
    
    # Suppress ResourceWarnings from all sources 
    ignore::ResourceWarning
    ignore::ResourceWarning:.*sqlite3.*
    ignore::ResourceWarning:.*asyncio.*
    ignore::ResourceWarning:.*socket.*
    ignore::ResourceWarning:.*ssl.*
    ignore::ResourceWarning:.*http.*
    ignore::ResourceWarning:.*urllib.*
    ignore::ResourceWarning:.*subprocess.*
    
    # Suppress unclosed connection warnings
    ignore:unclosed.*socket.*:ResourceWarning
    ignore:unclosed.*ssl.*:ResourceWarning
    ignore:unclosed.*client_session.*:ResourceWarning:aiohttp.*
    ignore:unclosed.*connection.*:ResourceWarning
    ignore:unclosed.*file.*:ResourceWarning
    ignore:unclosed.*transport.*:ResourceWarning
    
    # === ASYNC AND CONCURRENCY WARNINGS ===
    
    # Suppress async-related warnings
    ignore:coroutine.*delayed_restart.*was never awaited:RuntimeWarning
    ignore:coroutine.*was never awaited:RuntimeWarning:asyncio.*
    ignore:coroutine.*was never awaited:RuntimeWarning
    ignore:Using or importing.*asyncio.*:DeprecationWarning
    ignore:There is no current event loop:DeprecationWarning:asyncio.*
    ignore:.*was never awaited:RuntimeWarning
    ignore:.*event loop.*:DeprecationWarning
    
    # === PLATFORM-SPECIFIC WARNINGS ===
    
    # Windows-specific warnings
    ignore:.*Windows.*:RuntimeWarning
    ignore:.*ProactorEventLoop.*:DeprecationWarning
    ignore:.*winapi.*:DeprecationWarning
    
    # macOS-specific warnings
    ignore:.*Darwin.*:RuntimeWarning
    ignore:.*kqueue.*:RuntimeWarning
    ignore:.*FSEvents.*:RuntimeWarning
    
    # Linux-specific warnings  
    ignore:.*epoll.*:RuntimeWarning
    ignore:.*inotify.*:RuntimeWarning
    
    # === TESTING AND FRAMEWORK WARNINGS ===
    
    # Suppress pytest-specific warnings
    ignore::DeprecationWarning:pytest.*
    ignore::DeprecationWarning:_pytest.*
    ignore::UserWarning:pytest.*
    
    # FastAPI/Starlette warnings
    ignore:.*Starlette.*:DeprecationWarning
    ignore:.*FastAPI.*:DeprecationWarning
    ignore:.*middleware.*:DeprecationWarning
    
    # HTTP client warnings
    ignore:.*aiohttp.*:DeprecationWarning
    ignore:.*httpx.*:DeprecationWarning
    ignore:.*requests.*:DeprecationWarning
    
    # === AUDIO AND MULTIMEDIA WARNINGS ===
    
    # Audio library warnings
    ignore:.*pygame.*:DeprecationWarning
    ignore:.*pygame.*:RuntimeWarning
    ignore:.*audio.*:RuntimeWarning
    ignore:.*ALSA.*:RuntimeWarning
    ignore:.*PulseAudio.*:RuntimeWarning
    ignore:.*Jack.*:RuntimeWarning
    
    # === CRYPTOGRAPHIC AND SECURITY WARNINGS ===
    
    # SSL/TLS warnings
    ignore:.*ssl.*:DeprecationWarning
    ignore:.*certificate.*:RuntimeWarning
    ignore:.*OpenSSL.*:DeprecationWarning
    ignore:.*cryptography.*:DeprecationWarning
    
    # === GENERAL CATCH-ALL PATTERNS ===
    
    # Catch remaining external library warnings
    ignore::DeprecationWarning:.*site-packages.*
    ignore::ResourceWarning:.*site-packages.*
    ignore::RuntimeWarning:.*site-packages.*
    ignore::UserWarning:.*site-packages.*
    ignore::FutureWarning:.*site-packages.*
    ignore::ImportWarning:.*site-packages.*
    
    # Final catch-all for any remaining warnings from external sources
    ignore::Warning:.*site-packages.*

asyncio_mode = auto
asyncio_default_fixture_loop_scope = function